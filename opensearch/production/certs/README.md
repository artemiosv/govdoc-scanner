# SSL Certificates Directory

This directory contains SSL certificates for OpenSearch production deployment.

## ‚ö†Ô∏è Important Security Notes

- **Certificates are NOT committed to version control** for security reasons
- This directory starts empty and certificates are generated by setup scripts
- Never commit `.pem`, `.key`, `.crt`, or certificate files to git

## Certificate Generation

Certificates are automatically generated when you run:

```bash
./scripts/setup-security.sh
```

This creates demo certificates suitable for development and initial testing.

## Production Certificates

**üö® CRITICAL**: Replace demo certificates with proper CA-signed certificates before production use!

### Required Certificate Files:

- `root-ca.pem` - Root Certificate Authority certificate
- `root-ca-key.pem` - Root CA private key (keep secure!)
- `node.pem` - Node certificate for OpenSearch
- `node-key.pem` - Node private key (keep secure!)
- `admin.pem` - Admin client certificate
- `admin-key.pem` - Admin client private key (keep secure!)

### File Permissions:

- Certificate files (`.pem`): `644` (readable)
- Private keys (`*-key.pem`): `600` (owner read only)

## Certificate Replacement Process:

1. **Stop the cluster**: `docker-compose -f docker-compose.prod.yml down`
2. **Replace certificate files** in this directory
3. **Update configuration** if needed (in `../config/opensearch.yml`)
4. **Restart cluster**: `docker-compose -f docker-compose.prod.yml up -d`
5. **Verify connectivity**: `./scripts/health-check.sh`

## Security Best Practices:

- Use certificates from a trusted Certificate Authority in production
- Set proper file permissions (private keys should be 600)
- Rotate certificates before expiration
- Monitor certificate expiration dates
- Never share private keys
- Use strong key lengths (2048+ bit RSA or equivalent)

## Troubleshooting:

If you encounter certificate issues:

1. **Regenerate demo certificates**: `./scripts/generate-demo-certs.sh`
2. **Check file permissions**: `ls -la *.pem`
3. **Verify certificate validity**: `openssl x509 -in node.pem -text -noout`
4. **Check cluster logs**: `docker-compose -f docker-compose.prod.yml logs`
